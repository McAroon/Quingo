@page "/game/setup/pack"
@page "/game/setup/pack/{PackId:int}"

@inject ApplicationDbContext Db
@inject NavigationManager NavigationManager

<h1>@(PackId != null ? "Edit" : "Create") Pack</h1>

@code {
    [CascadingParameter]
    private HttpContext HttpContext { get; set; } = default!;

    [Parameter]
    public int? PackId { get; set; }

    public Pack? Pack { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Pack = await Db.Packs.FirstOrDefaultAsync(x => x.Id == PackId);
        // todo: check owner
        if (Pack == null)
        {
            NavigationManager.NavigateTo("game/setup/pack");
        }
    }
}
