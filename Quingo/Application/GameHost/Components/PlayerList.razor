<MudTable Items="Game.Players">
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>Lives</MudTh>
        <MudTh>Actions</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.PlayerName</MudTd>
        <MudTd DataLabel="Lives">@context.LivesNumber</MudTd>
        <MudTd DataLabel="Actions">
            <MudButton Size="Size.Small" Color="Color.Primary" OnClick="() => ViewPlayer(context)">View</MudButton>
        </MudTd>
    </RowTemplate>
</MudTable>

<MudDialog @bind-Visible="_dialogVisible" Options="_dialogOptions">
    <TitleContent>
        View player: @_selectedPlayer?.PlayerName
    </TitleContent>
    <DialogContent>
        <CascadingValue Value="_selectedPlayer">
            <Quingo.Application.GameClient.Components.PlayerCard ReadOnly />
        </CascadingValue>
    </DialogContent>
</MudDialog>

@code {
    [CascadingParameter]
    public GameState Game { get; set; } = default!;

    private DialogOptions _dialogOptions = new DialogOptions
        {
            MaxWidth = MaxWidth.Small,
            FullWidth = true,
            CloseButton = true,
            CloseOnEscapeKey = true
        };

    private PlayerState? _selectedPlayer;

    private bool _dialogVisible;

    private void ViewPlayer(PlayerState player)
    {
        _selectedPlayer = player;
        _dialogVisible = true;
    }
}
